<!DOCTYPE html>
<html lang="en" ng-app="app">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head
         content must come *after* these tags -->
    <title>Ristorante Con Fusion: details</title>
    <!-- Bootstrap -->
    <link href="../bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="../bower_components/bootstrap/dist/css/bootstrap-theme.min.css" rel="stylesheet">
    <link href="../bower_components/font-awesome/css/font-awesome.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>

<div class="container" ng-controller="DishDetailsController">

    <div class="row row-content">

        <div class="col-xs-10 col-xs-offset-1">

            <div class="media well">

                <div class="media-left">
                    <a href="#">
                        <img class="thumbnail" ng-src="{{ dish.image }}" alt="{{ dish.name }}">
                    </a>
                </div>

                <div class="media-body">
                    <h2 class="media-heading">{{ dish.name }}
                        <span class="label label-danger label-xs" ng-bind="dish.label"></span>
                        <span class="label label-success label-xs" ng-bind=" (dish.price | currency) + 'â‚¬'"></span>
                    </h2>
                    <p ng-bind="dish.description"></p>
                </div>

            </div>
        </div>

        <div class="col-xs-8 col-xs-offset-2">

            <div class="dish__comments">

                <div class="row">

                    <h4 class="col-xs-6" ng-show="dish.comments.length">
                        <span class="badge" ng-bind="dish.comments.length | number: 0"></span> comments:
                    </h4>

                    <div class="form-inline col-xs-6 text-right">
                        <div class="form-group-sm">
                            <label class="control-label" for="filter">Order by: </label>
                            <input id="filter" type="text" class="form-control" ng-model="currentFilter">
                        </div>
                    </div>

                </div>

                <ul class="comments__list list-group">

                    <li class="comment list-group-item" ng-repeat="comment in dish.comments | orderBy: currentFilter : false">

                        <blockquote class="comment comment_body bg-info">
                            {{ comment.comment }}
                            <!-- I've used the short format of a date -->
                            <footer class="comment__info">
                                Posted by <a href="#" class="comment__title" ><strong ng-bind="comment.author"></strong></a> at
                                <strong class="comment__date" ng-bind="comment.date | date : 'short'"></strong>
                            </footer>
                        </blockquote>

                        <!-- Simple stars rating -->
                        <div class="comment__rating">
                            <div class="comment__stars">
                                <span class="comment__star glyphicon" ng-repeat="i in [0, 1, 2, 3, 4]" ng-class="i < comment.rating ? 'glyphicon-star' : 'glyphicon-star-empty'"></span>
                            </div>
                        </div>

                    </li>

                </ul>

            </div>

        </div>

        <div class="col-xs-8 col-xs-offset-2" ng-controller="DishCommentController as comment">

            <ul class="absolutely-redundant-ul list-group">

                <li class="comment comment--preview list-group-item" ng-show="feedbackForm.$valid && feedbackForm.$dirty">

                    <h4>Preview:</h4>

                    <blockquote class="comment comment_body bg-info">
                        {{ (feedbackForm.comment.$valid && feedbackForm.comment.$dirty) ? comment.preview.comment : "" }}

                        <footer class="comment__info">
                            Posted by <a href="#" class="comment__title" >
                            <strong>
                                {{ (feedbackForm.username.$valid && feedbackForm.username.$dirty) ? comment.preview.author : ""}}
                            </strong></a>
                        </footer>
                    </blockquote>

                    <!-- Simple stars rating -->
                    <div class="comment__rating">
                        <div class="comment__stars">
                            <span class="comment__star glyphicon" ng-repeat="i in [0, 1, 2, 3, 4]" ng-class="i < comment.preview.rating ? 'glyphicon-star' : 'glyphicon-star-empty'"></span>
                        </div>
                    </div>

                </li>

            </ul>

            <br>

            <div class="well">

                <form name="feedbackForm" ng-submit="comment.submitComment()" class="form-horizontal" novalidate>
                    <div class="form-group has-feedback"
                         ng-class="{ 'has-error': feedbackForm.username.$dirty && feedbackForm.username.$invalid, 'has-success': feedbackForm.username.$dirty && feedbackForm.username.$valid }">
                        <label for="username" class="col-xs-2 control-label input-lg">Name*:</label>

                        <div class="col-xs-10">
                            <input type="text" class="form-control input-lg" id="username" name="username" pattern="[A-Za-z ]+"
                                   placeholder="Name" ng-model="comment.preview.author" required>
                            <span class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true"></span>
                            <div class="label label-warning" ng-show="feedbackForm.username.$dirty && feedbackForm.username.$error.required">
                                This is a required field.
                            </div>
                            <div class="label label-warning" ng-show="feedbackForm.username.$dirty && feedbackForm.username.$error.pattern">
                                Please, use latin letters.
                            </div>
                        </div>

                    </div>

                    <div class="form-group">
                        <label class="col-xs-2 control-label input-lg">Rating: </label>

                        <div class="col-xs-10">
                            <label ng-repeat="value in [1, 2, 3, 4, 5]" ng-attr-for="{{ 'rating' + value }}"
                                   class="checkbox-inline input-lg">
                                <input type="radio" name="rating" ng-attr-id="{{ 'rating' + value }}"
                                       value="{{ value }}" ng-model="comment.preview.rating">
                                <span class="btn btn-info">{{ value }}</span>
                            </label>
                        </div>
                    </div>

                    <div class="form-group has-feedback"
                         ng-class="{ 'has-error': feedbackForm.comment.$dirty && feedbackForm.comment.$invalid, 'has-success': feedbackForm.comment.$dirty && feedbackForm.comment.$valid }">
                        <label for="commentBody" class="col-xs-2 control-label input-lg">Comment*:</label>
                        <div class="col-xs-10">
                            <textarea id="commentBody" name="comment" class="form-control input-lg" required
                                      placeholder="I liked it!" rows="4" ng-model="comment.preview.comment"></textarea>
                            <span class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true"></span>
                            <div class="label label-warning" ng-show="feedbackForm.comment.$dirty && feedbackForm.comment.$invalid">
                                This is a required field.
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="col-xs-12 text-center">
                            <input class="btn btn-lg btn-success" type="submit" value="Submit!" ng-disabled="feedbackForm.$invalid">
                        </div>
                    </div>
                </form>

            </div>

        </div>
    </div>

</div>

<script src="../bower_components/angular/angular.js"></script>
<script src="scripts/app.js"></script>

</body>

</html>
